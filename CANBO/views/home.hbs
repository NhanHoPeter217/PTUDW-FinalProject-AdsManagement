{{#section 'css'}}
    <link href='public/css/utils.maps.css' rel='stylesheet' />
    <link rel='stylesheet' href='public/css/report.css' />
    <link rel="stylesheet" href="/public/css/adpointInfo.css">
    <style>
        .reportExclamation > img {
            transition: filter 0.1s ease-in-out; /* Add a transition effect */
        }

        .reportExclamation:hover > img {
            filter: brightness(0) invert(1); /* Adjust brightness and invert to change the color */
        }

        input::placeholder {        
            color: #000000;
            opacity: 0.5;
            font-size: medium;
            font-weight: 500;
        }

        input[type="text"] {
            font-size: medium;
            font-weight: 500;
        }

    </style>
{{/section}}

<div id='root'>
    <div>
    <div id='left-bar' class="sidebar-header" style="height: 100px">
        <div class='input-group mb-3 flex-nowrap justify-content-center mt-3'>
            <div class="search-icon">
                <i class="bi bi-search"></i>
            </div>
            <input
                type='text'
                class='search-bar'
                placeholder='Tìm kiếm địa điểm'
                aria-label='Tìm địa điểm'
                aria-describedby='button-addon2'
                id='searchInput'
            />
        </div>
        <div class="sidebar-title d-flex align-items-center justify-content-center">
            <div class="white-text text-center fw-semibold align-text-bottom">CÁC BẢNG QUẢNG CÁO</div>
        </div>
        <div id="boards-container" class="mt-4">
        {{#each AdsBoards}}
            <div
              class="ad-board card default-background primary-text"
              data-adsPoint="id_{{adsPoint}}"
              style="width: 20rem; padding: 17px 17px; gap: 40px; min-width: 350px;"
            >
              <div class="d-flex align-items-start">
                <div class="card-body ps-2" style="padding: 0px;">
                  <h5 class="card-title" style="font-size: 20px; font-family: Inter; font-weight: 600; margin-bottom: 4px;">{{adsBoardType}}</h5>
                  <p class="card-text">
                    <span class="label">Kích thước:</span>
                    <span class="value" style="font-size: 16px; font-family: Inter; font-weight: 700;">{{size.width}}m x {{size.height}}m</span>
                  </p>
                  <p class="card-text">
                    <span class="label">Số lượng:</span>
                    <span class="value" style="font-size: 16px; font-family: Inter; font-weight: 700;">{{quantity}} trụ / bảng</span>
                  </p>
                </div>
              </div>
            </div>
        {{/each}}
        </div>
    </div>
    </div>
    
    <div id='map'>
    </div>
</div>

{{!-- Elements for adPoint markers --}}
{{#each AdsPoints}}
{{#ifCond planningStatus '===' 'Đã quy hoạch'}}
<div class="adpointInfo adPointBlue" data-id="{{_id}}" data-lat="{{location.coords.lat}}" data-lng="{{location.coords.lng}}">
{{else}}
<div class="adpointInfo adPointRed" data-id="{{_id}}" data-lat="{{location.coords.lat}}" data-lng="{{location.coords.lng}}">
{{/ifCond}}
    <div class="markerPlaceholder" alt="" srcset="">{{adsBoard.length}}</div>

    {{#ifCond planningStatus '===' 'Đã quy hoạch'}}
    <img src="/public/assets/icons/Info_icon_Blue.svg" class="icon" alt="" srcset=""/>
    {{else}}
    <img src="/public/assets/icons/Info_icon_Red.svg" class="icon" alt="" srcset=""/>
    {{/ifCond}}

    <div class="details">
        <div class="d-flex justify-content-between align-items-center column-gap-3">
            <!-- location.locationName -->
            <h5>{{location.locationName}}</h5>
            <meta name="planningStatus" content="{{planningStatus}}"></meta>
        </div>
        <!-- locationType -->
        <h6>{{locationType}}</h6>
        <!-- location.address -->
        <p class="mb-1">Phường <b>{{location.ward}}</b> Quận <b>{{location.district}}</b></p>
        <p>Trạng thái: <b>{{planningStatus}}</b></p>
    </div>
</div>
{{/each}}

<!-- Filter Board -->
<div class="filterBoard shadow-sm">
    <div class='form-check form-switch' style="bottom: 100px">
        <input class='form-check-input' type='checkbox' role='switch' id='filterButton' checked />
        <label class='form-check-label' for='filterButton'>Điểm đặt</label>
    </div>
</div>


{{#section 'js'}}
    {{! Google Maps Functions }}
    <script>
        const nav = $( "#navbar" )
        $( document ).ready( function() {
            $( "#left-bar" ).css( {"height": $(window).height() - nav.height() - 16} );
        } );

        $( window ).on( "resize", function() {
            $( "#left-bar" ).css( {"height": $(this).height() - nav.height() - 16} );
        } );
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.5.2/js/fileinput.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.5.2/js/locales/vi.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.5.2/js/plugins/buffer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.5.2/js/plugins/filetype.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.5.2/js/plugins/piexif.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.5.2/js/plugins/sortable.min.js"></script>
    
    {{! Marker Clusterer }}
    <script src='https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js'></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.5.2/js/fileinput.min.js"></script>
    <script src="/public/tinymce/js/tinymce/tinymce.min.js"></script>
    <script src="/public/js/tinymce.js"></script>

    {{!-- Report processing --}}
    <script src="/public/js/report.js" async defer></script>

    <script src="https://www.google.com/recaptcha/api.js"
        async defer>
    </script>
    <script src="/public/js/main.js" type="module"></script>
    <script>
        function toggleSidebar() {
            var sidebar = document.getElementById('sidebar');
            var halfSidebarWidth = sidebar.offsetWidth;

            sidebar.classList.toggle('closed');
            sidebar.style.left = sidebar.classList.contains('closed') ? `calc(-${halfSidebarWidth}px)` : '0';
        }
    </script>
{{/section}}